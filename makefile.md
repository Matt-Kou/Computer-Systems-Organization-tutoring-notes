# Makefile tutorial

## Why do we need make file?

You can compiler your program without using make and Makefile. The reason for using Makefile is to simplify your commands. For example, to compile your program, you might want to run:
```
gcc main.c foo.c bar.c -o prog -std=c99 -Wall
./prog
```

Having a Makefile can simplify the process to:
```
make
```

Another very important usage of Makefile, but is less relevant to the homeworks of this class as the number of files that you compile is usually small, is that if you are compiling many files altogether while only changing one of the files, recompiling all of the files might take a very long time and unnecessary since you changed only one of the files (there is a workaround without using Makefile to compile only the modified file but it is still complicated). Makefile enables you to recompile only the file that you modified.

## [How to write Makefile?][1]


Makefile defines rules. The simplest rule is in the format of:
```
target ...: prerequisites ...
    recipe
    ...
```

> A *target* is usually the name of a file that is generated by a program; examples of targets are executable or object files. A target can also be the name of an action to carry out, such as `clean` (see [Phony Targets](https://www.gnu.org/software/make/manual/make.html#Phony-Targets)).
>
> A *prerequisite* is a file that is used as input to create the target. A target often depends on several files.
>
> A *recipe* is an action that make carries out. A recipe may have more than one command, either on the same line or each on its own line. **Please note**: you need to put a tab character at the beginning of every recipe line! This is an obscurity that catches the unwary. If you prefer to prefix your recipes with a character other than tab, you can set the .RECIPEPREFIX variable to an alternate character (see [Special Variables](https://www.gnu.org/software/make/manual/make.html#Special-Variables)).

[1]: https://www.gnu.org/software/make/manual/make.html#Rule-Introduction